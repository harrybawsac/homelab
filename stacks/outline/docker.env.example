# =============================================================================
# OUTLINE CONFIGURATION
# =============================================================================
# Copy this file to docker.env and fill in your values
# Generate secrets with: openssl rand -hex 32
# =============================================================================

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# REQUIRED: Application Settings
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# The fully qualified URL where Outline will be accessible (through NPM)
URL=https://outline.yourdomain.com

# Generate with: openssl rand -hex 32
SECRET_KEY=

# Generate with: openssl rand -hex 32
UTILS_SECRET=

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# REQUIRED: Database Configuration (using existing Postgres container)
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# Connection to existing Postgres container on the 'proxy' network
# Format: postgres://user:password@hostname:port/database
DATABASE_URL=postgres://outline:YOUR_OUTLINE_DB_PASSWORD@postgres:5432/outline

# Disable SSL for internal docker network connections
PGSSLMODE=disable

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# REQUIRED: Redis Configuration
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# Redis container within the same stack
REDIS_URL=redis://outline-redis:6379

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# REQUIRED: File Storage
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# Use local storage (files stored in the Docker volume)
FILE_STORAGE=local
FILE_STORAGE_LOCAL_ROOT_DIR=/var/lib/outline/data
FILE_STORAGE_UPLOAD_MAX_SIZE=262144000

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# REQUIRED: Authentication (choose ONE provider)
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# NOTE: Outline does NOT support email + password authentication!
# You MUST configure at least one SSO/OIDC provider below.

# ---- Option 1: Generic OIDC (works with Authelia, Authentik, Keycloak, etc.)
# For automatic discovery (recommended if your provider supports it):
# OIDC_ISSUER_URL=https://auth.yourdomain.com
# OIDC_CLIENT_ID=outline
# OIDC_CLIENT_SECRET=your_client_secret
# OIDC_DISPLAY_NAME=Login with SSO
# OIDC_SCOPES=openid profile email

# For manual discovery (if automatic doesn't work):
# OIDC_CLIENT_ID=outline
# OIDC_CLIENT_SECRET=your_client_secret
# OIDC_AUTH_URI=https://auth.yourdomain.com/authorize
# OIDC_TOKEN_URI=https://auth.yourdomain.com/token
# OIDC_USERINFO_URI=https://auth.yourdomain.com/userinfo
# OIDC_LOGOUT_URI=https://auth.yourdomain.com/logout
# OIDC_DISPLAY_NAME=Login with SSO

# ---- Option 2: Google OAuth
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# ---- Option 3: Slack OAuth
# SLACK_CLIENT_ID=
# SLACK_CLIENT_SECRET=

# ---- Option 4: Microsoft Entra (Azure AD)
# AZURE_CLIENT_ID=
# AZURE_CLIENT_SECRET=
# AZURE_RESOURCE_APP_ID=

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# OPTIONAL: Application Settings
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# Default language
DEFAULT_LANGUAGE=en_US

# Force HTTPS (recommended, NPM handles SSL)
FORCE_HTTPS=true

# Allow insecure (self-signed) SSL certs for OIDC provider (set true if needed)
# NODE_TLS_REJECT_UNAUTHORIZED=0

# Number of processes (adjust based on available memory, ~512MB per process)
WEB_CONCURRENCY=1

# Logging
LOG_LEVEL=info
DEBUG=http

# Enable update checks
ENABLE_UPDATES=true

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# OPTIONAL: SMTP for email notifications
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_FROM_EMAIL=outline@yourdomain.com
# SMTP_REPLY_EMAIL=
# SMTP_TLS_CIPHERS=
# SMTP_SECURE=true

# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
# OPTIONAL: Rate Limiting
# –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––

RATE_LIMITER_ENABLED=true
RATE_LIMITER_REQUESTS=1000
RATE_LIMITER_DURATION_WINDOW=60
